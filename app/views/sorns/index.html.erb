<div class="explainer">
  <div class="grid-container">
    <div class="grid-row grid-gap">
      <div class="tablet:grid-col-7">
        <p class="explainer__text">WHATEVER</p>
      </div>
      <div class="tablet:grid-col-5">
        <p class="explainer__text text-right">OKAY</p>
      </div>
    </div>
  </div>
</div>

  <div class="grid-container">
    <div class="grid-row grid-gap">
      <main class="usa-layout-docs__main desktop:grid-col-9 usa-prose usa-layout-docs" id="main-content">
        <div class="grid-row margin-top-2 margin-right-0">
          <div class="grid-col-12">
            <%= form_tag('/', method: "get", class: "usa-search") do %>
              <input class="usa-input" id="general-search" type="search" name="search">
              <button id="general-search-button" class="usa-button" type="submit">
                <span class="usa-search__submit-text">Search</span>
              </button>
            <% end %>
          </div>
        </div>
        <div class="grid-row margin-top-2 margin-right-0 results-meta">
          <div class="grid-col-6 display-inline results-meta__filters">
            <span class="results-meta__label ">Something: </span>
            <ul id="active-filters" class="margin-top-05 margin-bottom-05 padding-0">
            </ul>
          </div>


          <div class="grid-col-6 margin-bottom-0 text-right results-meta__count">
             <div id="search-result-counter" class="font-body-xs">
              Showing <span id="result-count" class="text-bold"><%= @count %></span> of <span id="total-count" class="text-bold"><%= @count %></span> <span id="search-term"></span>
            </div>
            <%= paginate @sorns %>
          </div>
        </div>
        <div id="cards">
          <div class="list">
            <% @sorns.each do |sorn| %>
              <div class="card card--sorn padding-2 margin-top-2 margin-right-0">
                <div class="grid-row margin-bottom-105">
                  <h2 class="system card__h2 card__h2--sorn">
                    <%= JSON.parse(sorn.system_name_and_number).first if sorn.system_name_and_number %>
                  </h2>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Agency:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= highlight(sorn.agency.name, params[:search]) %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Action:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= highlight(sorn.action, params[:search]) %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Authority:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= highlight(JSON.parse(sorn.authority).flatten.join, params[:search]) if sorn.authority %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Categories of&nbsp;Record:</span>
                  </div>

                  <div class="authority tablet:grid-col-10">
                    <span><%= highlight(sorn.categories_of_record, params[:search]) if sorn.categories_of_record %></span>
                  </div>
                    <%
=begin%>
 <span><%= highlight(JSON.parse(sorn.categories_of_record).flatten.join, params[:search]) if sorn.categories_of_record %></span>
<%
=end%>

                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Source:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.source %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Routine Uses:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.routine_uses %></span>
                  </div>
                </div>


                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">storage:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.storage %></span>
                  </div>
                </div>


                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">retrieval:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.retrieval %></span>
                  </div>
                </div>



                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">retention:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.retention %></span>
                  </div>
                </div>



                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">safeguards:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.safeguards %></span>
                  </div>
                </div>



                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">access:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.access %></span>
                  </div>
                </div>




                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">contesting:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.contesting %></span>
                  </div>
                </div>


                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">notification:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.notification %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">exemptions:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.exemptions %></span>
                  </div>
                </div>

                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">history:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= sorn.history %></span>
                  </div>
                </div>


                <div class="grid-row margin-bottom-105">
                  <div class="tablet:grid-col-2">
                    <span class="card__label">Links:</span>
                  </div>
                  <div class="authority tablet:grid-col-10">
                    <span><%= link_to 'html', sorn.html_url %></span>
                    <span><%= link_to 'xml', sorn.xml_url %></span>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </main>
    </div>
  </div>
</div>